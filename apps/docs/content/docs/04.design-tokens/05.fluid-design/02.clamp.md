---
title: Clamp Function
description: Learn how to use useFluid and useFluidClamp to create fluid, responsive values that scale smoothly between viewport sizes using CSS clamp calculations.
navigation:
    title: Clamp Function
    icon: i-lucide-scaling
---

::pro-notice
::

## Overview

The clamp composables provide the foundation for fluid responsive design in Styleframe. They handle the mathematical calculations that make values scale smoothly between minimum and maximum viewport widths without using media queries.

These composables work together to create the core fluid system:
- **`useFluid()`**: Establishes the viewport range and creates shared fluid variables
- **`useFluidClamp()`**: Generates individual fluid values using clamp calculations

## `useFluid()`

The `useFluid()` composable sets up the viewport range for all fluid calculations in your theme. It creates four essential CSS variables that other fluid composables reference.

### Basic Usage

Call `useFluid()` once at the start of your theme setup:

::tabs
:::tabs-item{icon="i-lucide-code" label="Code"}

```/dev/null/use-fluid-basic.ts#L1-9
import { styleframe } from 'styleframe';
import { useFluid } from '@styleframe/theme';

const s = styleframe();

// Use default viewport range (320px - 1440px)
const { fluidMinWidth, fluidMaxWidth, fluidScreen, fluidBreakpoint } = useFluid(s);

export default s;
```

:::
:::tabs-item{icon="i-lucide-file-input" label="Output"}

```/dev/null/use-fluid-basic-output.css#L1-6
:root {
    --fluid--min-width: 320;
    --fluid--max-width: 1440;
    --fluid--screen: 100vw;
    --fluid--breakpoint: calc((var(--fluid--screen) - var(--fluid--min-width) / 16 * 1rem) / (var(--fluid--max-width) - var(--fluid--min-width)));
}
```

:::
::

### Return Values

The `useFluid()` composable returns four variables:

| Variable | Description | Default Value |
|----------|-------------|---------------|
| **`fluidMinWidth`** | Minimum viewport width (in pixels) | `320` |
| **`fluidMaxWidth`** | Maximum viewport width (in pixels) | `1440` |
| **`fluidScreen`** | Current viewport width | `100vw` |
| **`fluidBreakpoint`** | Normalized progress between min and max | Calculated |

### Understanding the Breakpoint Calculation

The `fluidBreakpoint` variable is the key to fluid scaling. It represents how far the current viewport is between the minimum and maximum widths, as a decimal value from 0 to 1:

- At `320px`: `fluidBreakpoint = 0` (0% through the range)
- At `880px`: `fluidBreakpoint = 0.5` (50% through the range)
- At `1440px`: `fluidBreakpoint = 1` (100% through the range)

This normalized value makes it easy to interpolate between any min/max value pair.

### Customizing the Viewport Range

You can customize the viewport range to match your design needs:

::tabs
:::tabs-item{icon="i-lucide-code" label="Code"}

```/dev/null/use-fluid-custom.ts#L1-12
import { styleframe } from 'styleframe';
import { useFluid } from '@styleframe/theme';

const s = styleframe();

// Custom viewport range for tablet-to-desktop
const { fluidMinWidth, fluidMaxWidth } = useFluid(s, {
    minWidth: 768,   // Start scaling at tablet size
    maxWidth: 1920   // Stop scaling at large desktop
});

export default s;
```

:::
:::tabs-item{icon="i-lucide-file-input" label="Output"}

```/dev/null/use-fluid-custom-output.css#L1-6
:root {
    --fluid--min-width: 768;
    --fluid--max-width: 1920;
    --fluid--screen: 100vw;
    --fluid--breakpoint: calc((var(--fluid--screen) - var(--fluid--min-width) / 16 * 1rem) / (var(--fluid--max-width) - var(--fluid--min-width)));
}
```

:::
::

### Common Viewport Ranges

Choose a viewport range that matches your target devices:

```/dev/null/viewport-ranges.ts#L1-20
import { styleframe } from 'styleframe';
import { useFluid } from '@styleframe/theme';

const s = styleframe();

// Mobile-first (default)
// Covers iPhone SE to standard laptop
useFluid(s, { minWidth: 320, maxWidth: 1440 });

// Small mobile to desktop
// Modern phone sizes to desktop
useFluid(s, { minWidth: 375, maxWidth: 1600 });

// Tablet-first
// iPad portrait to large desktop
useFluid(s, { minWidth: 768, maxWidth: 1920 });

// Desktop-only fluid scaling
// Small desktop to ultra-wide
useFluid(s, { minWidth: 1024, maxWidth: 2560 });
```

### Using Custom Breakpoint Variables

You can create different fluid breakpoints for different parts of your design:

```/dev/null/custom-breakpoints.ts#L1-21
import { styleframe } from 'styleframe';
import { useFluid } from '@styleframe/theme';

const s = styleframe();
const { variable, css, ref } = s;

// Main fluid breakpoint (mobile to desktop)
useFluid(s, { minWidth: 320, maxWidth: 1440 });

// Custom breakpoint for desktop-only scaling
const fluidDesktopMinWidth = variable('fluid--desktop-min-width', 1024);
const fluidDesktopMaxWidth = variable('fluid--desktop-max-width', 1920);
const fluidDesktopScreen = variable('fluid--desktop-screen', '100vw');
const fluidDesktopBreakpoint = variable(
    'fluid--desktop-breakpoint',
    css`calc((${ref(fluidDesktopScreen)} - ${ref(fluidDesktopMinWidth)} / 16 * 1rem) / (${ref(fluidDesktopMaxWidth)} - ${ref(fluidDesktopMinWidth)}))`
);

// Use different breakpoints for different properties
// (See useFluidClamp examples below)
```

## `useFluidClamp()`

The `useFluidClamp()` composable creates individual fluid values that scale between a minimum and maximum. It's the low-level building block for all fluid design tokens.

### Basic Usage

Create a fluid value that scales between two endpoints:

::tabs
:::tabs-item{icon="i-lucide-code" label="Code"}

```/dev/null/use-fluid-clamp-basic.ts#L1-18
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, ref, selector } = s;

// Set up fluid viewport range
useFluid(s);

// Create a fluid font size: 16px at mobile, 20px at desktop
const fluidFontSize = variable(
    'font-size--fluid',
    useFluidClamp(s, [16, 20])
);

selector('.text', {
    fontSize: ref(fluidFontSize)
});
```

:::
:::tabs-item{icon="i-lucide-file-input" label="Output"}

```/dev/null/use-fluid-clamp-basic-output.css#L1-9
:root {
    --fluid--min-width: 320;
    --fluid--max-width: 1440;
    --fluid--screen: 100vw;
    --fluid--breakpoint: calc((var(--fluid--screen) - var(--fluid--min-width) / 16 * 1rem) / (var(--fluid--max-width) - var(--fluid--min-width)));
    --font-size--fluid: calc((16 / 16 * 1rem) + (20 - 16) * var(--fluid--breakpoint));
}

.text {
    font-size: var(--font-size--fluid);
}
```

:::
::

### How It Works

The `useFluidClamp()` function generates a CSS `calc()` expression that:

1. Converts the minimum value to `rem` units (dividing by 16)
2. Calculates the difference between max and min
3. Multiplies the difference by the fluid breakpoint (0-1 range)
4. Adds the result to the minimum value

**Formula:**
```/dev/null/clamp-formula.txt#L1-2
result = (min / 16 * 1rem) + (max - min) * breakpoint
```

**Example calculation at different viewport widths:**
```/dev/null/clamp-calculation.txt#L1-5
At 320px (breakpoint = 0):   16px + (20 - 16) * 0   = 16px
At 880px (breakpoint = 0.5): 16px + (20 - 16) * 0.5 = 18px
At 1440px (breakpoint = 1):  16px + (20 - 16) * 1   = 20px
```

### Using Variables in Ranges

You can pass Styleframe variables instead of literal values:

```/dev/null/use-fluid-clamp-variables.ts#L1-23
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, ref } = s;

useFluid(s);

// Define min/max as variables
const fontSizeMin = variable('font-size--min', 16);
const fontSizeMax = variable('font-size--max', 20);

// Use variables in the clamp range
const fontSize = variable(
    'font-size',
    useFluidClamp(s, [fontSizeMin, fontSizeMax])
);

// Or reference existing variables
const fontSizeLg = variable(
    'font-size--lg',
    useFluidClamp(s, [ref(fontSizeMin), ref(fontSizeMax)])
);
```

### Custom Breakpoints

Use a different breakpoint for specific fluid calculations:

```/dev/null/use-fluid-clamp-custom-breakpoint.ts#L1-25
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, css, ref } = s;

// Main fluid breakpoint (mobile to desktop)
useFluid(s, { minWidth: 320, maxWidth: 1440 });

// Custom breakpoint for desktop-only scaling
const fluidDesktopMinWidth = variable('fluid--desktop-min-width', 1024);
const fluidDesktopMaxWidth = variable('fluid--desktop-max-width', 1920);
const fluidDesktopScreen = variable('fluid--desktop-screen', '100vw');
const fluidDesktopBreakpoint = variable(
    'fluid--desktop-breakpoint',
    css`calc((${ref(fluidDesktopScreen)} - ${ref(fluidDesktopMinWidth)} / 16 * 1rem) / (${ref(fluidDesktopMaxWidth)} - ${ref(fluidDesktopMinWidth)}))`
);

// Body text scales on all devices
const fontSize = variable('font-size', useFluidClamp(s, [16, 18]));

// Large heading only scales on desktop
const fontSizeHero = variable('font-size--hero', 
    useFluidClamp(s, [48, 72], fluidDesktopBreakpoint)
);
```

## Examples

### Fluid Spacing System

Create a complete fluid spacing scale:

::tabs
:::tabs-item{icon="i-lucide-code" label="Code"}

```/dev/null/fluid-spacing-example.ts#L1-26
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, ref, selector } = s;

useFluid(s);

// Create fluid spacing variables
const spacingXs = variable('spacing--xs', useFluidClamp(s, [4, 6]));
const spacingSm = variable('spacing--sm', useFluidClamp(s, [8, 12]));
const spacing = variable('spacing', useFluidClamp(s, [16, 24]));
const spacingMd = variable('spacing--md', useFluidClamp(s, [24, 32]));
const spacingLg = variable('spacing--lg', useFluidClamp(s, [32, 48]));
const spacingXl = variable('spacing--xl', useFluidClamp(s, [48, 64]));

// Use in components
selector('.container', {
    padding: ref(spacing),
    gap: ref(spacingMd)
});

selector('.section', {
    marginTop: ref(spacingXl),
    marginBottom: ref(spacingLg)
});
```

:::
:::tabs-item{icon="i-lucide-file-input" label="Output"}

```/dev/null/fluid-spacing-output.css#L1-23
:root {
    --fluid--min-width: 320;
    --fluid--max-width: 1440;
    --fluid--screen: 100vw;
    --fluid--breakpoint: calc((var(--fluid--screen) - var(--fluid--min-width) / 16 * 1rem) / (var(--fluid--max-width) - var(--fluid--min-width)));
    --spacing--xs: calc((4 / 16 * 1rem) + (6 - 4) * var(--fluid--breakpoint));
    --spacing--sm: calc((8 / 16 * 1rem) + (12 - 8) * var(--fluid--breakpoint));
    --spacing: calc((16 / 16 * 1rem) + (24 - 16) * var(--fluid--breakpoint));
    --spacing--md: calc((24 / 16 * 1rem) + (32 - 24) * var(--fluid--breakpoint));
    --spacing--lg: calc((32 / 16 * 1rem) + (48 - 32) * var(--fluid--breakpoint));
    --spacing--xl: calc((48 / 16 * 1rem) + (64 - 48) * var(--fluid--breakpoint));
}

.container {
    padding: var(--spacing);
    gap: var(--spacing--md);
}

.section {
    margin-top: var(--spacing--xl);
    margin-bottom: var(--spacing--lg);
}
```

:::
::

### Fluid Container Width

Create containers that scale fluidly:

```/dev/null/fluid-container-example.ts#L1-24
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, ref, selector } = s;

useFluid(s);

// Fluid container max-widths
const containerSm = variable('container--sm', useFluidClamp(s, [320, 640]));
const containerMd = variable('container--md', useFluidClamp(s, [640, 960]));
const containerLg = variable('container--lg', useFluidClamp(s, [960, 1280]));

selector('.container-sm', {
    maxWidth: ref(containerSm),
    marginInline: 'auto'
});

selector('.container-md', {
    maxWidth: ref(containerMd),
    marginInline: 'auto'
});

selector('.container-lg', {
    maxWidth: ref(containerLg),
    marginInline: 'auto'
});
```

### Fluid Border Radius

Scale border radius smoothly across viewports:

```/dev/null/fluid-border-radius-example.ts#L1-22
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, ref, selector } = s;

useFluid(s);

// Fluid border radius values
const borderRadiusSm = variable('border-radius--sm', useFluidClamp(s, [4, 6]));
const borderRadius = variable('border-radius', useFluidClamp(s, [8, 12]));
const borderRadiusLg = variable('border-radius--lg', useFluidClamp(s, [16, 24]));

selector('.card', {
    borderRadius: ref(borderRadius)
});

selector('.button', {
    borderRadius: ref(borderRadiusSm)
});

selector('.modal', {
    borderRadius: ref(borderRadiusLg)
});
```

### Multi-Range Fluid System

Use different viewport ranges for different purposes:

```/dev/null/multi-range-example.ts#L1-40
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, css, ref, selector } = s;

// Main fluid range (mobile to desktop)
useFluid(s, { minWidth: 320, maxWidth: 1440 });

// Desktop-only fluid range
const fluidDesktopMinWidth = variable('fluid--desktop-min-width', 1024);
const fluidDesktopMaxWidth = variable('fluid--desktop-max-width', 1920);
const fluidDesktopScreen = variable('fluid--desktop-screen', '100vw');
const fluidDesktopBreakpoint = variable(
    'fluid--desktop-breakpoint',
    css`calc((${ref(fluidDesktopScreen)} - ${ref(fluidDesktopMinWidth)} / 16 * 1rem) / (${ref(fluidDesktopMaxWidth)} - ${ref(fluidDesktopMinWidth)}))`
);

// Typography scales across all devices
const fontSize = variable('font-size', useFluidClamp(s, [16, 18]));
const fontSizeLg = variable('font-size--lg', useFluidClamp(s, [20, 24]));

// Hero text only scales on desktop
const fontSizeHero = variable('font-size--hero', 
    useFluidClamp(s, [48, 72], fluidDesktopBreakpoint)
);

// Layout spacing scales on all devices
const spacing = variable('spacing', useFluidClamp(s, [16, 24]));

// Large section spacing only scales on desktop
const spacingSection = variable('spacing--section',
    useFluidClamp(s, [64, 128], fluidDesktopBreakpoint)
);

selector('body', { fontSize: ref(fontSize) });
selector('h1', { fontSize: ref(fontSizeLg) });
selector('.hero-title', { fontSize: ref(fontSizeHero) });
selector('.container', { padding: ref(spacing) });
selector('.section', { marginBlock: ref(spacingSection) });
```

## Advanced Usage

### Combining with CSS Math

Use fluid values in complex calculations:

```/dev/null/css-math-example.ts#L1-22
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, css, ref, selector } = s;

useFluid(s);

const spacing = variable('spacing', useFluidClamp(s, [16, 24]));
const fontSize = variable('font-size', useFluidClamp(s, [16, 18]));

// Double the fluid spacing
const spacingDouble = variable('spacing--double', css`${ref(spacing)} * 2`);

// Line height based on fluid font size
const lineHeight = variable('line-height', css`${ref(fontSize)} * 1.5`);

selector('.container', {
    padding: ref(spacingDouble),
    fontSize: ref(fontSize),
    lineHeight: ref(lineHeight)
});
```

### Negative Fluid Values

Create negative margins that scale fluidly:

```/dev/null/negative-values-example.ts#L1-18
import { styleframe } from 'styleframe';
import { useFluid, useFluidClamp } from '@styleframe/theme';

const s = styleframe();
const { variable, css, ref, selector } = s;

useFluid(s);

const spacing = variable('spacing', useFluidClamp(s, [16, 24]));

// Create negative version
const spacingNegative = variable('spacing--negative', css`${ref(spacing)} * -1`);

selector('.pull-up', {
    marginTop: ref(spacingNegative)
});
```

## Best Practices

### 1. Call `useFluid()` Once

Set up your fluid viewport range once at the beginning of your theme:

```/dev/null/best-practice-once.ts#L1-13
import { styleframe } from 'styleframe';
import { useFluid } from '@styleframe/theme';

const s = styleframe();

// ✅ Good: Call once at theme setup
useFluid(s, { minWidth: 320, maxWidth: 1440 });

// ❌ Bad: Don't call multiple times with different values
// useFluid(s, { minWidth: 320, maxWidth: 1440 });
// useFluid(s, { minWidth: 768, maxWidth: 1920 }); // This will override!

// If you need multiple ranges, create custom breakpoint variables
```

### 2. Use Meaningful Value Ranges

Choose min/max values that make sense for your design:

```/dev/null/best-practice-meaningful.ts#L1-11
// ✅ Good: Meaningful range
const fontSize = variable('font-size', useFluidClamp(s, [16, 20]));

// ✅ Good: Proportional scaling
const spacingLg = variable('spacing--lg', useFluidClamp(s, [32, 48]));

// ❌ Bad: Range too small (won't be noticeable)
const fontSize = variable('font-size', useFluidClamp(s, [16, 16.5]));

// ❌ Bad: Range too large (can break layout)
const fontSize = variable('font-size', useFluidClamp(s, [12, 48]));
```

### 3. Test at Multiple Viewport Sizes

Always test your fluid values at:
- Minimum viewport (e.g., 320px)
- Mid-range viewports (e.g., 768px, 1024px)
- Maximum viewport (e.g., 1440px)
- In-between sizes to check the transition

### 4. Combine with `useFluidFontSize()`

For typography systems, use `useFluidFontSize()` instead of creating individual clamps:

```/dev/null/best-practice-combine.ts#L1-19
import { styleframe } from 'styleframe';
import { useFluid, useFluidFontSize, useScale, useScalePowers } from '@styleframe/theme';

const s = styleframe();

useFluid(s);

const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

// ✅ Good: Use useFluidFontSize for complete type system
const { fontSize, fontSizeLg, fontSizeXl } = useFluidFontSize(s, 
    { min: 16, max: 18 },
    {
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]]
    }
);
```

### 5. Document Your Viewport Range

Always document why you chose specific viewport widths:

```/dev/null/best-practice-document.ts#L1-8
import { styleframe } from 'styleframe';
import { useFluid } from '@styleframe/theme';

const s = styleframe();

// Viewport range: 375px (iPhone X) to 1600px (standard desktop)
// Chosen based on our analytics showing 90% of users are in this range
useFluid(s, { minWidth: 375, maxWidth: 1600 });
```

## FAQ

### When should I use `useFluidClamp()` vs `useFluidFontSize()`?

- **Use `useFluidClamp()`** for: spacing, padding, margins, border radius, container widths, or any individual fluid value
- **Use `useFluidFontSize()`** for: complete typography systems with multiple related font sizes

### Can I use different viewport ranges for different properties?

Yes! Create custom breakpoint variables for different purposes (see the "Multi-Range Fluid System" example above).

### Does `useFluidClamp()` work with non-pixel values?

Yes, you can pass any CSS value, but the formula assumes pixel-based calculations. For best results, use numeric pixel values.

### How do I make a value fluid only on mobile?

Use a custom breakpoint that only scales within mobile viewport ranges:

```/dev/null/faq-mobile-only.ts#L1-16
const fluidMobileMinWidth = variable('fluid--mobile-min-width', 320);
const fluidMobileMaxWidth = variable('fluid--mobile-max-width', 767);
const fluidMobileScreen = variable('fluid--mobile-screen', '100vw');
const fluidMobileBreakpoint = variable(
    'fluid--mobile-breakpoint',
    css`calc((${ref(fluidMobileScreen)} - ${ref(fluidMobileMinWidth)} / 16 * 1rem) / (${ref(fluidMobileMaxWidth)} - ${ref(fluidMobileMinWidth)}))`
);

// This only scales from 320px to 767px
const fontSizeMobile = variable(
    'font-size--mobile',
    useFluidClamp(s, [14, 16], fluidMobileBreakpoint)
);
```

### Can I combine fluid values with fixed values?

Absolutely! Mix fluid and fixed values as needed:

```/dev/null/faq-combine-fixed.ts#L1-13
const fontSize = variable('font-size', useFluidClamp(s, [16, 18]));

selector('.card', {
    fontSize: ref(fontSize),    // Fluid
    padding: '20px',            // Fixed
    borderRadius: '8px',        // Fixed
    maxWidth: '600px'           // Fixed
});

// Or use media queries for layout changes
media('(min-width: 768px)', ({ selector }) => {
    selector('.card', { flexDirection: 'row' }); // Breakpoint-based
});
```

## Next Steps

- **[Fluid Typography](/docs/design-tokens/fluid-design/typography)**: Learn about `useFluidFontSize()` for complete type systems
- **[Scales](/docs/design-tokens/scales)**: Understand modular scales for mathematical consistency
- **[Spacing](/docs/design-tokens/spacing)**: Create fluid spacing systems
- **[Typography](/docs/design-tokens/typography)**: Combine fluid and fixed typography tokens