---
title: Fluid Typography
description: Create fluid typography systems that scale smoothly across viewports using mathematical modular scales. Generate complete type hierarchies with perfect proportions at every screen size.
navigation:
    title: Typography
    icon: i-lucide-type
---

::pro-notice
::

## Overview

The `useFluidFontSize()` composable creates complete fluid typography systems that scale smoothly across all viewport sizes. It combines base font size ranges with modular scale multipliers to generate type hierarchies that maintain perfect proportions from mobile to desktop.

Unlike traditional responsive typography that jumps between fixed sizes at breakpoints, fluid typography creates smooth, continuous transitions that look perfect at every viewport width.

## Why Fluid Typography?

Traditional responsive typography requires managing multiple font sizes at different breakpoints:

```/dev/null/traditional-typography.css#L1-32
/* Traditional Responsive Typography */
h1 { font-size: 32px; }
h2 { font-size: 24px; }
h3 { font-size: 20px; }
body { font-size: 16px; }

@media (min-width: 768px) {
    h1 { font-size: 40px; }
    h2 { font-size: 28px; }
    h3 { font-size: 22px; }
    body { font-size: 17px; }
}

@media (min-width: 1024px) {
    h1 { font-size: 48px; }
    h2 { font-size: 32px; }
    h3 { font-size: 24px; }
    body { font-size: 18px; }
}

@media (min-width: 1440px) {
    h1 { font-size: 56px; }
    h2 { font-size: 36px; }
    h3 { font-size: 26px; }
    body { font-size: 18px; }
}
```

**Problems with this approach:**
- Sudden jumps at breakpoints feel jarring
- Maintaining proportions across breakpoints is difficult
- Lots of code to maintain
- Only perfect at specific viewport widths

**Fluid typography solves this:**

```/dev/null/fluid-typography.ts#L1-29
import { styleframe } from 'styleframe';
import { useFluid, useFluidFontSize, useScale, useScalePowers } from '@styleframe/theme';

const s = styleframe();
const { ref, selector } = s;

useFluid(s);

const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

const { fontSize, fontSizeLg, fontSizeXl, fontSize2xl } = useFluidFontSize(s,
    { min: 16, max: 18 },
    {
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]],
        '2xl': [scaleMinPowers[3], scaleMaxPowers[3]]
    }
);

// Perfect proportions at every viewport width
selector('body', { fontSize: ref(fontSize) });
selector('h3', { fontSize: ref(fontSizeLg) });
selector('h2', { fontSize: ref(fontSizeXl) });
selector('h1', { fontSize: ref(fontSize2xl) });

export default s;
```

## `useFluidFontSize()`

The `useFluidFontSize()` composable generates a complete set of fluid font size variables based on:

1. **Base size range**: Minimum and maximum font sizes for your base text
2. **Scale multipliers**: Modular scale powers that create proportional relationships
3. **Viewport range**: Automatically uses the fluid breakpoint from `useFluid()`

### Basic Usage

Create a fluid typography system with proportional scaling:

::tabs
:::tabs-item{icon="i-lucide-code" label="Code"}

```/dev/null/basic-usage.ts#L1-35
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useScale, 
    useScalePowers 
} from '@styleframe/theme';

const s = styleframe();
const { ref, selector } = s;

// Set up fluid viewport range
useFluid(s);

// Create scales for mobile (1.2) and desktop (1.25)
const { scaleMin, scaleMax } = useScale(s, { 
    min: 1.2,   // Minor Third
    max: 1.25   // Major Third
});

const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

// Generate fluid font sizes
const { fontSize, fontSizeSm, fontSizeLg, fontSizeXl } = useFluidFontSize(s,
    { min: 16, max: 18 },
    {
        sm: [scaleMinPowers[-1], scaleMaxPowers[-1]],
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]]
    }
);

export default s;
```

:::
:::tabs-item{icon="i-lucide-file-input" label="Output"}

```/dev/null/basic-usage-output.css#L1-10
:root {
    --fluid--min-width: 320;
    --fluid--max-width: 1440;
    --fluid--screen: 100vw;
    --fluid--breakpoint: calc((var(--fluid--screen) - var(--fluid--min-width) / 16 * 1rem) / (var(--fluid--max-width) - var(--fluid--min-width)));
    --font-size--min: 16;
    --font-size--max: 18;
    --font-size--sm: calc((var(--font-size--min) * 0.833 / 16 * 1rem) + (var(--font-size--max) * 0.8 - var(--font-size--min) * 0.833) * var(--fluid--breakpoint));
    --font-size: calc((var(--font-size--min) / 16 * 1rem) + (var(--font-size--max) - var(--font-size--min)) * var(--fluid--breakpoint));
    --font-size--lg: calc((var(--font-size--min) * 1.2 / 16 * 1rem) + (var(--font-size--max) * 1.25 - var(--font-size--min) * 1.2) * var(--fluid--breakpoint));
    --font-size--xl: calc((var(--font-size--min) * 1.44 / 16 * 1rem) + (var(--font-size--max) * 1.5625 - var(--font-size--min) * 1.44) * var(--fluid--breakpoint));
}
```

:::
::

### Parameters

The `useFluidFontSize()` composable accepts three parameters:

**1. Styleframe instance** (required)
```/dev/null/param-1.ts#L1-2
const s = styleframe();
useFluidFontSize(s, /* ... */);
```

**2. Base size range** (required)
```/dev/null/param-2.ts#L1-4
{ 
    min: 16,  // Base font size at minimum viewport
    max: 18   // Base font size at maximum viewport
}
```

**3. Size definitions** (required)
```/dev/null/param-3.ts#L1-6
{
    sm: [scaleMinPowers[-1], scaleMaxPowers[-1]],      // Smaller than base
    default: [scaleMinPowers[0], scaleMaxPowers[0]],   // Base size
    lg: [scaleMinPowers[1], scaleMaxPowers[1]],        // Larger than base
    xl: [scaleMinPowers[2], scaleMaxPowers[2]]         // Even larger
}
```

**4. Custom breakpoint** (optional)
```/dev/null/param-4.ts#L1-3
const customBreakpoint = variable('custom-breakpoint', /* ... */);
useFluidFontSize(s, { min: 16, max: 18 }, { /* sizes */ }, customBreakpoint);
```

### Return Values

Returns variables for each size you define, plus a base `fontSize` variable:

```/dev/null/return-values.ts#L1-24
const {
    fontSize,       // Variable<'font-size'>         - Base/default size
    fontSizeXs,     // Variable<'font-size--xs'>     - Extra small
    fontSizeSm,     // Variable<'font-size--sm'>     - Small
    fontSizeMd,     // Variable<'font-size--md'>     - Medium
    fontSizeLg,     // Variable<'font-size--lg'>     - Large
    fontSizeXl,     // Variable<'font-size--xl'>     - Extra large
    fontSize2xl,    // Variable<'font-size--2xl'>    - 2X large
    fontSize3xl,    // Variable<'font-size--3xl'>    - 3X large
} = useFluidFontSize(s, 
    { min: 16, max: 18 },
    {
        xs: [scaleMinPowers[-2], scaleMaxPowers[-2]],
        sm: [scaleMinPowers[-1], scaleMaxPowers[-1]],
        md: [scaleMinPowers[0], scaleMaxPowers[0]],
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]],
        '2xl': [scaleMinPowers[3], scaleMaxPowers[3]],
        '3xl': [scaleMinPowers[4], scaleMaxPowers[4]],
        default: '@md'  // Makes fontSize point to fontSizeMd
    }
);
```

### How It Works

The composable:

1. Creates `--font-size--min` and `--font-size--max` variables from your base range
2. Multiplies these base values by the scale powers you provide
3. Uses `useFluidClamp()` to create smooth transitions between min and max
4. Generates variables for each size you define

**Example calculation for `lg` size:**

At 320px viewport:
```/dev/null/calc-min.txt#L1-2
16px (base min) × 1.2 (scale min power 1) = 19.2px
```

At 1440px viewport:
```/dev/null/calc-max.txt#L1-2
18px (base max) × 1.25 (scale max power 1) = 22.5px
```

Between viewports:
```/dev/null/calc-between.txt#L1-2
Smooth interpolation from 19.2px to 22.5px using fluid breakpoint
```

## Understanding Modular Scales

Modular scales create harmonious proportions by multiplying a base value by consistent ratios. Common scales are based on musical intervals and mathematical constants.

### Common Scale Ratios

| Scale Name | Ratio | Character | Best For |
|------------|-------|-----------|----------|
| **Minor Second** | 1.067 | Very subtle | Minimal designs, tight hierarchies |
| **Major Second** | 1.125 | Subtle | Clean, understated designs |
| **Minor Third** | 1.2 | Balanced | Most websites, readable hierarchies |
| **Major Third** | 1.25 | Distinct | Marketing sites, clear hierarchy |
| **Perfect Fourth** | 1.333 | Bold | Editorial content, strong contrast |
| **Perfect Fifth** | 1.5 | Dramatic | Landing pages, hero sections |
| **Golden Ratio** | 1.618 | Striking | Art, design-forward sites |

### Choosing Scale Ratios

**For mobile (smaller scale):**
- Tighter spacing works better on small screens
- Use ratios like 1.125 - 1.25
- Prevents text from becoming too large

**For desktop (larger scale):**
- More dramatic hierarchy enhances readability
- Use ratios like 1.25 - 1.5
- Creates clear visual distinction

**Example combinations:**

```/dev/null/scale-combinations.ts#L1-12
// Conservative: subtle on mobile, balanced on desktop
const { scaleMin, scaleMax } = useScale(s, { min: 1.125, max: 1.25 });

// Balanced: readable on mobile, distinct on desktop
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.333 });

// Dramatic: bold on mobile, striking on desktop
const { scaleMin, scaleMax } = useScale(s, { min: 1.25, max: 1.5 });

// Editorial: strong contrast everywhere
const { scaleMin, scaleMax } = useScale(s, { min: 1.333, max: 1.5 });
```

## Examples

### Complete Fluid Typography System

A full typography system with 8 sizes:

::tabs
:::tabs-item{icon="i-lucide-code" label="Code"}

```/dev/null/complete-system.ts#L1-65
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useScale, 
    useScalePowers 
} from '@styleframe/theme';

const s = styleframe();
const { ref, selector } = s;

// Set up fluid viewport range
useFluid(s);

// Create scales (Minor Third for mobile, Major Third for desktop)
const { scaleMin, scaleMax } = useScale(s, { 
    min: 1.2,   // Minor Third
    max: 1.25   // Major Third
});

const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

// Generate complete fluid font size scale
const {
    fontSize,
    fontSizeXs,
    fontSizeSm,
    fontSizeLg,
    fontSizeXl,
    fontSize2xl,
    fontSize3xl,
    fontSize4xl
} = useFluidFontSize(s,
    { min: 16, max: 18 },
    {
        xs: [scaleMinPowers[-2], scaleMaxPowers[-2]],
        sm: [scaleMinPowers[-1], scaleMaxPowers[-1]],
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]],
        '2xl': [scaleMinPowers[3], scaleMaxPowers[3]],
        '3xl': [scaleMinPowers[4], scaleMaxPowers[4]],
        '4xl': [scaleMinPowers[5], scaleMaxPowers[5]]
    }
);

// Apply to semantic HTML elements
selector('body', { fontSize: ref(fontSize) });
selector('small', { fontSize: ref(fontSizeXs) });
selector('p', { fontSize: ref(fontSize) });
selector('h6', { fontSize: ref(fontSizeSm) });
selector('h5', { fontSize: ref(fontSizeLg) });
selector('h4', { fontSize: ref(fontSizeXl) });
selector('h3', { fontSize: ref(fontSize2xl) });
selector('h2', { fontSize: ref(fontSize3xl) });
selector('h1', { fontSize: ref(fontSize4xl) });

// Utility classes
selector('.text-xs', { fontSize: ref(fontSizeXs) });
selector('.text-sm', { fontSize: ref(fontSizeSm) });
selector('.text-base', { fontSize: ref(fontSize) });
selector('.text-lg', { fontSize: ref(fontSizeLg) });
selector('.text-xl', { fontSize: ref(fontSizeXl) });

export default s;
```

:::
:::tabs-item{icon="i-lucide-file-input" label="Output"}

```/dev/null/complete-system-output.css#L1-50
:root {
    --fluid--min-width: 320;
    --fluid--max-width: 1440;
    --fluid--screen: 100vw;
    --fluid--breakpoint: calc((var(--fluid--screen) - var(--fluid--min-width) / 16 * 1rem) / (var(--fluid--max-width) - var(--fluid--min-width)));
    --font-size--min: 16;
    --font-size--max: 18;
    --font-size--xs: calc((var(--font-size--min) * 0.694 / 16 * 1rem) + (var(--font-size--max) * 0.64 - var(--font-size--min) * 0.694) * var(--fluid--breakpoint));
    --font-size--sm: calc((var(--font-size--min) * 0.833 / 16 * 1rem) + (var(--font-size--max) * 0.8 - var(--font-size--min) * 0.833) * var(--fluid--breakpoint));
    --font-size: calc((var(--font-size--min) / 16 * 1rem) + (var(--font-size--max) - var(--font-size--min)) * var(--fluid--breakpoint));
    --font-size--lg: calc((var(--font-size--min) * 1.2 / 16 * 1rem) + (var(--font-size--max) * 1.25 - var(--font-size--min) * 1.2) * var(--fluid--breakpoint));
    --font-size--xl: calc((var(--font-size--min) * 1.44 / 16 * 1rem) + (var(--font-size--max) * 1.5625 - var(--font-size--min) * 1.44) * var(--fluid--breakpoint));
    --font-size--2xl: calc((var(--font-size--min) * 1.728 / 16 * 1rem) + (var(--font-size--max) * 1.953125 - var(--font-size--min) * 1.728) * var(--fluid--breakpoint));
    --font-size--3xl: calc((var(--font-size--min) * 2.074 / 16 * 1rem) + (var(--font-size--max) * 2.44140625 - var(--font-size--min) * 2.074) * var(--fluid--breakpoint));
    --font-size--4xl: calc((var(--font-size--min) * 2.488 / 16 * 1rem) + (var(--font-size--max) * 3.0517578125 - var(--font-size--min) * 2.488) * var(--fluid--breakpoint));
}

body {
    font-size: var(--font-size);
}

small {
    font-size: var(--font-size--xs);
}

p {
    font-size: var(--font-size);
}

h6 { font-size: var(--font-size--sm); }
h5 { font-size: var(--font-size--lg); }
h4 { font-size: var(--font-size--xl); }
h3 { font-size: var(--font-size--2xl); }
h2 { font-size: var(--font-size--3xl); }
h1 { font-size: var(--font-size--4xl); }

.text-xs { font-size: var(--font-size--xs); }
.text-sm { font-size: var(--font-size--sm); }
.text-base { font-size: var(--font-size); }
.text-lg { font-size: var(--font-size--lg); }
.text-xl { font-size: var(--font-size--xl); }
```

:::
::

### Fixed Base with Fluid Headings

Keep body text at a consistent size while scaling headings:

```/dev/null/fixed-base-example.ts#L1-32
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useScale, 
    useScalePowers 
} from '@styleframe/theme';

const s = styleframe();
const { ref, selector } = s;

useFluid(s);

const { scaleMin, scaleMax } = useScale(s, { min: 1.25, max: 1.333 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

// Fixed base: 16px at all viewports
const { fontSize, fontSizeLg, fontSizeXl, fontSize2xl } = useFluidFontSize(s,
    { min: 16, max: 16 },  // Same min/max = fixed base
    {
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]],
        '2xl': [scaleMinPowers[3], scaleMaxPowers[3]]
    }
);

// Body text stays at 16px, headings scale fluidly
selector('body', { fontSize: ref(fontSize) });  // Always 16px
selector('h3', { fontSize: ref(fontSizeLg) });   // Scales from 20px to 21.3px
selector('h2', { fontSize: ref(fontSizeXl) });   // Scales from 25px to 28.4px
selector('h1', { fontSize: ref(fontSize2xl) });  // Scales from 31.25px to 37.9px
```

### Multiple Typography Systems

Create different systems for different contexts:

```/dev/null/multiple-systems.ts#L1-60
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useScale, 
    useScalePowers 
} from '@styleframe/theme';

const s = styleframe();
const { ref, selector, variable } = s;

useFluid(s);

// System 1: Body text (subtle scale)
const { scaleBodyMin, scaleBodyMax } = useScale(s, { 
    bodyMin: 1.125,
    bodyMax: 1.25
});
const scaleBodyMinPowers = useScalePowers(s, scaleBodyMin);
const scaleBodyMaxPowers = useScalePowers(s, scaleBodyMax);

const { fontSize, fontSizeLg } = useFluidFontSize(s,
    { min: 16, max: 18 },
    {
        default: [scaleBodyMinPowers[0], scaleBodyMaxPowers[0]],
        lg: [scaleBodyMinPowers[1], scaleBodyMaxPowers[1]]
    }
);

// System 2: Display text (dramatic scale)
const { scaleDisplayMin, scaleDisplayMax } = useScale(s, { 
    displayMin: 1.333,
    displayMax: 1.5
});
const scaleDisplayMinPowers = useScalePowers(s, scaleDisplayMin);
const scaleDisplayMaxPowers = useScalePowers(s, scaleDisplayMax);

const fontSizeDisplayBase = variable('font-size--display-base', 24);
const fontSizeDisplayMin = variable('font-size--display-min', 24);
const fontSizeDisplayMax = variable('font-size--display-max', 32);

// Custom display sizes (starting from a larger base)
const fontSizeDisplay = variable(
    'font-size--display',
    useFluidClamp(s, [
        s.css`${s.ref(fontSizeDisplayMin)} * ${scaleDisplayMinPowers[0]}`,
        s.css`${s.ref(fontSizeDisplayMax)} * ${scaleDisplayMaxPowers[0]}`
    ])
);

const fontSizeDisplayLg = variable(
    'font-size--display-lg',
    useFluidClamp(s, [
        s.css`${s.ref(fontSizeDisplayMin)} * ${scaleDisplayMinPowers[1]}`,
        s.css`${s.ref(fontSizeDisplayMax)} * ${scaleDisplayMaxPowers[1]}`
    ])
);

// Apply different systems to different contexts
selector('article', { fontSize: ref(fontSize) });
selector('.hero-title', { fontSize: ref(fontSizeDisplay) });
selector('.hero-subtitle', { fontSize: ref(fontSizeDisplayLg) });
```

### Responsive Line Height

Pair fluid font sizes with proportional line heights:

```/dev/null/line-height-example.ts#L1-42
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useScale, 
    useScalePowers,
    useLineHeight
} from '@styleframe/theme';

const s = styleframe();
const { ref, selector, css } = s;

useFluid(s);

const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

const { fontSize, fontSizeXl, fontSize2xl } = useFluidFontSize(s,
    { min: 16, max: 18 },
    {
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]],
        '2xl': [scaleMinPowers[3], scaleMaxPowers[3]]
    }
);

// Fixed line height ratios
const { lineHeightTight, lineHeightNormal, lineHeightRelaxed } = useLineHeight(s);

// Or create proportional line heights
selector('body', {
    fontSize: ref(fontSize),
    lineHeight: ref(lineHeightNormal)  // 1.5
});

selector('h2', {
    fontSize: ref(fontSizeXl),
    lineHeight: ref(lineHeightTight)  // 1.25 (tighter for headings)
});

selector('.hero-title', {
    fontSize: ref(fontSize2xl),
    lineHeight: '1.1'  // Very tight for display text
});
```

## Advanced Usage

### Using Reference Syntax

Reference other fluid font sizes instead of defining scale powers:

```/dev/null/reference-syntax.ts#L1-24
import { styleframe } from 'styleframe';
import { useFluid, useFluidFontSize, useScale, useScalePowers } from '@styleframe/theme';

const s = styleframe();

useFluid(s);

const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

const { fontSize, fontSizeLg, fontSizeXl, fontSize2xl } = useFluidFontSize(s,
    { min: 16, max: 18 },
    {
        lg: [scaleMinPowers[1], scaleMaxPowers[1]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]],
        '2xl': [scaleMinPowers[3], scaleMaxPowers[3]],
        default: '@lg'  // fontSize references fontSizeLg
    }
);

// Now fontSize === fontSizeLg
// Useful when you want a semantic name to point to a specific size
```

### Desktop-Only Fluid Scaling

Create typography that only scales on larger viewports:

```/dev/null/desktop-only.ts#L1-34
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useScale, 
    useScalePowers 
} from '@styleframe/theme';

const s = styleframe();
const { variable, css, ref } = s;

// Mobile: fixed sizes (no scaling)
useFluid(s, { minWidth: 320, maxWidth: 320 });  // No range = no scaling

// Desktop: fluid scaling only on desktop
const fluidDesktopMinWidth = variable('fluid--desktop-min-width', 1024);
const fluidDesktopMaxWidth = variable('fluid--desktop-max-width', 1920);
const fluidDesktopScreen = variable('fluid--desktop-screen', '100vw');
const fluidDesktopBreakpoint = variable(
    'fluid--desktop-breakpoint',
    css`calc((${ref(fluidDesktopScreen)} - ${ref(fluidDesktopMinWidth)} / 16 * 1rem) / (${ref(fluidDesktopMaxWidth)} - ${ref(fluidDesktopMinWidth)}))`
);

const { scaleMin, scaleMax } = useScale(s, { min: 1.25, max: 1.333 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

const { fontSize, fontSizeXl } = useFluidFontSize(s,
    { min: 18, max: 20 },
    {
        default: [scaleMinPowers[0], scaleMaxPowers[0]],
        xl: [scaleMinPowers[2], scaleMaxPowers[2]]
    },
    fluidDesktopBreakpoint  // Use custom breakpoint
);
```

### Combining with useMultiplier

For complex systems, you can manually construct the size ranges:

```/dev/null/with-multiplier.ts#L1-40
import { styleframe } from 'styleframe';
import { 
    useFluid,
    useFluidClamp,
    useFontSize,
    useScale, 
    useScalePowers,
    useMultiplier
} from '@styleframe/theme';

const s = styleframe();
const { variable, ref } = s;

useFluid(s);

// Create min and max base font sizes
const fontSizeMin = variable('font-size--min', 16);
const fontSizeMax = variable('font-size--max', 18);

// Create min and max scales
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

// Generate scaled sizes for min and max
const { fontSizeMinLg, fontSizeMinXl } = useMultiplier(s, fontSizeMin, {
    lg: scaleMinPowers[1],
    xl: scaleMinPowers[2]
});

const { fontSizeMaxLg, fontSizeMaxXl } = useMultiplier(s, fontSizeMax, {
    lg: scaleMaxPowers[1],
    xl: scaleMaxPowers[2]
});

// Create fluid sizes using the multiplied values
const { fontSizeLg, fontSizeXl } = useFontSize(s, {
    lg: useFluidClamp(s, [fontSizeMinLg, fontSizeMaxLg]),
    xl: useFluidClamp(s, [fontSizeMinXl, fontSizeMaxXl])
});
```

## Best Practices

### 1. Choose Appropriate Base Size Range

The base size range determines how much your body text scales. Keep it subtle:

```/dev/null/base-size-range.ts#L1-12
// ✅ Good: Subtle scaling (16px to 18px = 12.5% increase)
const { fontSize } = useFluidFontSize(s, { min: 16, max: 18 }, { /* ... */ });

// ✅ Good: Minimal scaling for accessibility
const { fontSize } = useFluidFontSize(s, { min: 16, max: 17 }, { /* ... */ });

// ⚠️ Use with caution: Moderate scaling
const { fontSize } = useFluidFontSize(s, { min: 14, max: 18 }, { /* ... */ });

// ❌ Bad: Too much scaling (can harm readability)
const { fontSize } = useFluidFontSize(s, { min: 12, max: 20 }, { /* ... */ });
```

### 2. Use Consistent Scale Ratios

Stick to proven modular scales for harmonious results:

```/dev/null/consistent-scales.ts#L1-15
// ✅ Good: Common combinations
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });    // Minor Third → Major Third
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.333 });   // Minor Third → Perfect Fourth
const { scaleMin, scaleMax } = useScale(s, { min: 1.25, max: 1.333 });  // Major Third → Perfect Fourth

// ⚠️ Exotic: Large contrast (use for specific designs)
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.5 });     // Very dramatic scaling

// ❌ Bad: Same scale for both (defeats the purpose)
const { scaleMin, scaleMax } = useScale(s, { min: 1.25, max: 1.25 });

// ❌ Bad: Mobile scale larger than desktop
const { scaleMin, scaleMax } = useScale(s, { min: 1.5, max: 1.2 });     // Backwards!
```

### 3. Test Readability at All Viewports

Always verify your typography looks good at:
- Minimum viewport (e.g., 320px)
- Common mobile sizes (375px, 414px)
- Tablet sizes (768px, 834px)
- Desktop sizes (1024px, 1440px, 1920px)

Check that:
- Body text remains readable (45-75 characters per line)
- Headings maintain clear hierarchy
- No text becomes too large or too small

### 4. Combine with Fixed Typography When Needed

Not everything needs to be fluid:

```/dev/null/combine-fixed.ts#L1-24
import { styleframe } from 'styleframe';
import { 
    useFluid, 
    useFluidFontSize, 
    useFontSize,
    useScale, 
    useScalePowers 
} from '@styleframe/theme';

const s = styleframe();
const { ref, selector } = s;

useFluid(s);

// Fluid typography for content
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);
const { fontSize, fontSizeXl } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]],
    xl: [scaleMinPowers[2], scaleMaxPowers[2]]
});

// Fixed typography for UI elements
const { fontSizeButton, fontSizeLabel } = useFontSize(s, {
    button: 14,
    label: 12
});

selector('article', { fontSize: ref(fontSize) });      // Fluid
selector('h1', { fontSize: ref(fontSizeXl) });         // Fluid
selector('.button', { fontSize: ref(fontSizeButton) }); // Fixed
selector('.label', { fontSize: ref(fontSizeLabel) });   // Fixed
```

### 5. Document Your Scaling Decisions

Explain your choices in your theme:

```/dev/null/document-scaling.ts#L1-17
import { styleframe } from 'styleframe';
import { useFluid, useFluidFontSize, useScale, useScalePowers } from '@styleframe/theme';

const s = styleframe();

// Base font size: 16px (mobile) to 18px (desktop)
// Reasoning: Provides better readability on larger screens without 
// becoming too large on mobile devices
useFluid(s);

// Scale ratios: Minor Third (1.2) on mobile, Major Third (1.25) on desktop
// Reasoning: Minor Third prevents headings from overwhelming small screens,
// while Major Third creates stronger visual hierarchy on larger displays
const { scaleMin, scaleMax } = useScale(s, { min: 1.2, max: 1.25 });
const scaleMinPowers = useScalePowers(s, scaleMin);
const scaleMaxPowers = useScalePowers(s, scaleMax);

// ... rest of typography setup
```

## Common Pitfalls

### 1. Forgetting to Call `useFluid()`

```/dev/null/pitfall-no-fluid.ts#L1-12
// ❌ Bad: Missing useFluid() call
const { fontSize } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]]
});
// This will fail because --fluid--breakpoint doesn't exist!

// ✅ Good: Always call useFluid() first
useFluid(s);
const { fontSize } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]]
});
```

### 2. Incorrect Scale Power Pairing

```/dev/null/pitfall-wrong-pairing.ts#L1-14
// ❌ Bad: Mismatched powers
const { fontSize } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[1]]  // 0 doesn't match 1!
});

// ✅ Good: Matched powers
const { fontSize } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]]  // Both use power 0
});

// ✅ Also good: Consistent progression
const { fontSizeLg } = useFluidFontSize(s, { min: 16, max: 18 }, {
    lg: [scaleMinPowers[1], scaleMaxPowers[1]]  // Both use power 1
});
```

### 3. Too Many Font Sizes

```/dev/null/pitfall-too-many.ts#L1-24
// ❌ Bad: Too many sizes creates confusion
const {
    fontSizeXxs,
    fontSizeXs,
    fontSizeSm,
    fontSizeMd,
    fontSize,
    fontSizeLg,
    fontSizeXl,
    fontSize2xl,
    fontSize3xl,
    fontSize4xl,
    fontSize5xl,
    fontSize6xl
} = useFluidFontSize(s, { min: 16, max: 18 }, { /* 12 sizes! */ });

// ✅ Good: 5-7 sizes provides good hierarchy without overwhelming
const { fontSizeXs, fontSizeSm, fontSize, fontSizeLg, fontSizeXl, fontSize2xl } = 
    useFluidFontSize(s, { min: 16, max: 18 }, { /* 6 sizes */ });
```

### 4. Base Size Same as Min/Max

```/dev/null/pitfall-same-base.ts#L1-11
// ❌ Bad: No scaling (defeats the purpose)
const { fontSize } = useFluidFontSize(s, { min: 16, max: 16 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]]
});

// ✅ Good: Allow some scaling
const { fontSize } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]]
});
```

## FAQ

### What's the difference between `useFluidFontSize()` and `useFluidClamp()`?

- **`useFluidFontSize()`**: Creates a complete typography system with multiple related sizes using modular scales
- **`useFluidClamp()`**: Creates a single fluid value between a min and max

Use `useFluidFontSize()` for typography, `useFluidClamp()` for individual values like spacing or border radius.

### Can I use different scales for different font sizes?

Yes! Create multiple calls to `useFluidFontSize()` with different base values and scales:

```/dev/null/faq-different-scales.ts#L1-22
// Body text: subtle scaling
const { scaleBodyMin, scaleBodyMax } = useScale(s, { bodyMin: 1.125, bodyMax: 1.25 });
const scaleBodyMinPowers = useScalePowers(s, scaleBodyMin);
const scaleBodyMaxPowers = useScalePowers(s, scaleBodyMax);

const { fontSize, fontSizeLg } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleBodyMinPowers[0], scaleBodyMaxPowers[0]],
    lg: [scaleBodyMinPowers[1], scaleBodyMaxPowers[1]]
});

// Display text: dramatic scaling
const { scaleDisplayMin, scaleDisplayMax } = useScale(s, { displayMin: 1.333, displayMax: 1.5 });
const scaleDisplayMinPowers = useScalePowers(s, scaleDisplayMin);
const scaleDisplayMaxPowers = useScalePowers(s, scaleDisplayMax);

const fontSizeDisplayMin = variable('font-size--display-min', 24);
const fontSizeDisplayMax = variable('font-size--display-max', 32);
// Create custom display sizes using useFluidClamp...
```

### How do I choose the right scale ratio?

Start with these guidelines:
- **1.125 - 1.2**: Minimal hierarchy, subtle differences
- **1.2 - 1.25**: Most websites, balanced hierarchy  
- **1.25 - 1.333**: Strong hierarchy, editorial content
- **1.333 - 1.5**: Very bold, marketing/landing pages
- **1.5+**: Extreme contrast, use sparingly

Test with your content and adjust based on how it looks.

### Can I make only certain font sizes fluid?

Yes! Mix `useFluidFontSize()` and `useFontSize()`:

```/dev/null/faq-mix-fluid-fixed.ts#L1-17
// Fluid headings
const { fontSizeXl, fontSize2xl } = useFluidFontSize(s, { min: 16, max: 18 }, {
    xl: [scaleMinPowers[2], scaleMaxPowers[2]],
    '2xl': [scaleMinPowers[3], scaleMaxPowers[3]]
});

// Fixed body and UI text
const { fontSize, fontSizeSm } = useFontSize(s, {
    default: 16,
    sm: 14
});

selector('body', { fontSize: ref(fontSize) });      // Fixed
selector('small', { fontSize: ref(fontSizeSm) });   // Fixed
selector('h2', { fontSize: ref(fontSizeXl) });      // Fluid
selector('h1', { fontSize: ref(fontSize2xl) });     // Fluid
```

### How do I handle line heights with fluid typography?

Use fixed line height ratios that scale proportionally with the font size:

```/dev/null/faq-line-heights.ts#L1-19
import { useLineHeight } from '@styleframe/theme';

// Fixed line height ratios
const { lineHeightTight, lineHeightNormal, lineHeightRelaxed } = useLineHeight(s);

const { fontSize, fontSizeXl } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]],
    xl: [scaleMinPowers[2], scaleMaxPowers[2]]
});

// Line height scales automatically with font size
selector('body', {
    fontSize: ref(fontSize),
    lineHeight: ref(lineHeightNormal)  // 1.5 × fluid font size
});

selector('h1', {
    fontSize: ref(fontSizeXl),
    lineHeight: ref(lineHeightTight)  // 1.25 × fluid font size
});
```

### Does fluid typography work with variable fonts?

Absolutely! Variable fonts work great with fluid typography:

```/dev/null/faq-variable-fonts.ts#L1-21
import { useFontFamily, useFontWeight } from '@styleframe/theme';

const { fontFamily } = useFontFamily(s, {
    default: '"Inter Variable", system-ui, sans-serif'
});

const { fontWeightNormal, fontWeightBold } = useFontWeight(s);

const { fontSize, fontSizeXl } = useFluidFontSize(s, { min: 16, max: 18 }, {
    default: [scaleMinPowers[0], scaleMaxPowers[0]],
    xl: [scaleMinPowers[2], scaleMaxPowers[2]]
});

selector('body', {
    fontFamily: ref(fontFamily),
    fontSize: ref(fontSize),
    fontWeight: ref(fontWeightNormal)
});

// Variable font weights work seamlessly with fluid sizing
```

## Next Steps

- **[Clamp Function](/docs/design-tokens/fluid-design/clamp)**: Learn about `useFluid()` and `useFluidClamp()`
- **[Scales](/docs/design-tokens/scales)**: Deep dive into modular scales
- **[Typography](/docs/design-tokens/typography)**: Combine fluid and fixed typography tokens
- **[Line Height](/docs/design-tokens/typography#uselineheight)**: Create proportional line heights
- **[Utopia Fluid Type Scale](https://utopia.fyi/)**: Explore the inspiration for this system